<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    

    <title>了解Docker容器内外的MySQL拒绝服务错误 | 听雪者的博客</title>
    <meta property="og:title" content="了解Docker容器内外的MySQL拒绝服务错误 - 听雪者的博客">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2021-02-04T12:57:58&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2021-02-04T12:57:58&#43;08:00'>
        
    <meta name="Keywords" content="golang,go语言,go语言笔记,区块链">
    <meta name="description" content="了解Docker容器内外的MySQL拒绝服务错误">
        
    <meta name="author" content="听雪者">
    <meta property="og:url" content="https://cyberwave.github.io/post/understanding-mysql-access-denied-error-inout-docker/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
        <link rel="stylesheet" href='/css/douban.css'>
    
        <link rel="stylesheet" href='/css/other.css'>
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://cyberwave.github.io">
                        听雪者的博客
                    </a>
                
                <p class="description">Go语言(golang)、区块链!</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://cyberwave.github.io">首页</a>
                    
                    <a  href="https://cyberwave.github.io/tools/" title="工具">工具</a>
                    
                    <a  href="https://cyberwave.github.io/archives/" title="归档">归档</a>
                    
                    <a  href="https://cyberwave.github.io/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 200px;
        margin-left: -210px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#在-userlocalhost-和-user172-之间有什么不同">在 <code>user@localhost</code> 和 <code>user@172.%</code> 之间有什么不同？</a></li>
  </ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if(leftPos<220){
                postToc.css({"width":leftPos-10,"margin-left":(0-leftPos)})
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">了解Docker容器内外的MySQL拒绝服务错误</h1>
        </header>
        <date class="post-meta meta-date">
            2021年2月4日
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='/categories/mysql'>mysql</a></span>
            
        </div>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="clear" style="display: none">
            <div class="toc-article">
                <div class="toc-title">文章目录</div>
            </div>
        </div>
        
        <div class="post-content">
            <p><a href="https://techsparx.com/software-development/docker/damp/access-denied.html">Understanding MySQL the Access Denied error in or outside a Docker container</a></p>
<p>MySQL基于三个数据对用户身份认证：用户名，连接的另一端的IP地址或域名和提供的密码。它在 <code>mysql.user</code> 表搜索这三个值的匹配项。没有匹配项，则返回一个 <em>Access Denied</em> 的错误。这虽然是个简单的模型，但有几个可能的错误配置可能会让调试感到沮丧。</p>
<p>我从上世纪90年代就开始使用MySQL，但从未深入过。例如，典型的Web宿主机提供管理控制面板，可以告诉你用户名和密码，以及使用您请求的任何数据库实例的说明。然后进入命令行并键入类似这样的内容：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd">$ mysql -u finley -h mysql.example.com -p db_name
</code></pre></td></tr></table>
</div>
</div><p>瞧，你已经连上MySQL数据库了。关键点是你并没有创建用户账户，主机提供做了这些，你不必担心它在MySQL中是如何配置的。同样，可以使用 <em>PHPMyAdmin</em> 来管理MySQL数据库，同样的，它也可以处理创建和删除用户ID，这样，我们就可以在不了解它实际工作原理的情况下愉快地使用该应用程序。</p>
<p>但是，我当前正在更新我的书 <em>Node.js Web开发</em>，我正在写关于部署 <em>Node.js</em> 应用的章节。该章节包括一个很长的部分：展示如何使用Docker，特别是如何设置一对Docker容器，一个运行MySQL服务器，另一个运行MySQL服务器 <em>Node.js</em> 应用程序。这一章最初是四年前写的，我做了一个相当简单的更新，但是它不工作了，这要拜 <em>Access denied for user (using password: YES)</em> 的错误所赐，无论我尝试了多少办法，阅读了多少 stackoverflow 文章！</p>
<p>最后，在仔细阅读 MySQL 文档之后，这个神秘的主题更有意义。我从某个地方找到了MySQL的片段：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">sudo mysql <span style="color:#998;font-style:italic">--user=root  &lt;&lt;EOF
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">CREATE</span> <span style="color:#000;font-weight:bold">DATABASE</span> userauth;
<span style="color:#000;font-weight:bold">CREATE</span> <span style="color:#000;font-weight:bold">USER</span> <span style="color:#d14">&#39;userauth&#39;</span><span style="color:#000;font-weight:bold">@</span><span style="color:#d14">&#39;localhost&#39;</span> IDENTIFIED <span style="color:#000;font-weight:bold">BY</span> <span style="color:#d14">&#39;userauth&#39;</span>;
<span style="color:#000;font-weight:bold">GRANT</span> <span style="color:#000;font-weight:bold">ALL</span> <span style="color:#000;font-weight:bold">PRIVILEGES</span> <span style="color:#000;font-weight:bold">ON</span> userauth.<span style="color:#000;font-weight:bold">*</span> <span style="color:#000;font-weight:bold">TO</span> <span style="color:#d14">&#39;userauth&#39;</span><span style="color:#000;font-weight:bold">@</span><span style="color:#d14">&#39;localhost&#39;</span> <span style="color:#000;font-weight:bold">WITH</span> <span style="color:#000;font-weight:bold">GRANT</span> <span style="color:#000;font-weight:bold">OPTION</span>;
EOF
</code></pre></td></tr></table>
</div>
</div><p>这时发生了什么是相当的清晰，但它实际的工作，以及出现错误时如何诊断还有一点儿神秘。为了说明这一点，该代码片段执行以下操作：</p>
<ul>
<li>创建一个数据库</li>
<li>使用用户名，主机名和密码（Identified By 意味着密码）创建一个用户</li>
<li>赋予刚才创建的用户访问这个数据库的所有权限</li>
</ul>
<p>有些不明显的事情是用户 <code>'userauth'@'localhost'</code>是否与另一个用户相关，比如 <code>'userauth'@'example.com'</code> ? 真的需要引号吗？授予期权(<strong>GRANT OPTION</strong>)是什么意思？我们到底要为数据库的远程用户做什么？</p>
<p>在这篇文章的其余部分，我想描述一些经验教训和文档指南，希望能为您节省一些时间。</p>
<h1 id="常见错误-在docker映像中未正确处理挂载卷的mysql数据目录">常见错误-在Docker映像中未正确处理挂载卷的MySQL数据目录</h1>
<p>在Docker中，提供一个 MySQL 服务器真正精彩的方式是：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd">docker run --detach --name db-userauth \
    --env MYSQL_USER=userauth \
    --env MYSQL_PASSWORD=userauth \
    --env MYSQL_DATABASE=userauth  \
    --mount type=bind,src=`pwd`/userauth-data,dst=/var/lib/mysql \
    --network authnet \
    --env MYSQL_ROOT_PASSWORD=w0rdw0rd \
    mysql/mysql-server:8.0 \
    --bind_address=0.0.0.0
</code></pre></td></tr></table>
</div>
</div><p>这确保创建的容器有个有用的名字，<code>db-SERVICE</code>。我们设置了一个仅对命名表具有特权的用户ID，而对 <code>root</code> 用户的访问仅限于来自<code>localhost</code>的连接。一个重要的事情是使用 <code>--mount</code> 来确保MySQL数据目录不是隐藏在容器中，而是独立的。这样，我们可以在任何喜欢的时间删除并重建容器，而不会丢失数据库。通过将容器连接到 <code>network</code>，我们可以限制容器到 network 上其他容器的连接。通过不暴露MySQL端口（未映射 <code>-p 3306:3306</code>），可以确保数据库仅对虚拟 network 上的其他容器可见。</p>
<p>在运行该命令之前，确保运行了: <code>mkdir userauth-data</code></p>
<p><strong>错误</strong>是，在对容器进行另一次实验时，忘记重新创建此目录</p>
<p>在 MySQL 容器首次启动时（MariaDB容器也是如此），发生的事件是，容器中的脚本运行并初始化一个空白数据库。这些脚本根据数据目录是否为空来决定是否运行。空的数据目录意味着必须初始化数据库，否则脚本将假定存在一个数据库，并且不会初始化新的数据库。</p>
<p>假设您正尝试调试 <em>Access denied for user (using password: YES)</em> ，因此尝试一个又一个的想法？每次更改设置，然后重新创建/重新启动MySQL容器时，<strong>必须记住删除，然后创建一个空的数据目录</strong>。</p>
<p>如果脚本检测有数据目录，它不会运行，因此您更改用户配置的任何尝试都不会产生任何影响，因为没有重新创建用户，因为数据目录初始化由于存在数据目录而未运行。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd">... Edit MySQL container settings
$ rm -rf userauth-data
$ mkdir userauth-data
$ docker run ... as above
</code></pre></td></tr></table>
</div>
</div><p>这是你必须遵循的模式。在每次使用MySQL配置的实验中，都要采取这三个步骤。</p>
<h1 id="如何在创建容器时定制初始化数据库">如何在创建容器时定制初始化数据库？</h1>
<p>在容器创建中可以运行一些 SQL 文件。示例你可能有一些初始化数据需要加载，或者你希望定制用户配置，或者创建额外的数据库。在初始化容器时，可以使用SQL执行任何操作。</p>
<p>简单地在容器中挂载目录 <code>/docker-entrypoint-initdb.d/</code>。该容器必须包含 SQL 脚本。在容器初始化过程中，在该目录中的所有的 SQL 脚本都会被执行。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">docker run <span style="color:#998;font-style:italic">--name=mysql1 \
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#998;font-style:italic">--mount type=bind,src=/path-on-host-machine/scripts/,dst=/docker-entrypoint-initdb.d/ \
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#000;font-weight:bold">-</span>d mysql<span style="color:#000;font-weight:bold">/</span>mysql<span style="color:#000;font-weight:bold">-</span>server:tag
</code></pre></td></tr></table>
</div>
</div><p>这是一个设置目录的方式</p>
<p>例如，考虑一个名为 <code>create-users.sql</code> 包含：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#000;font-weight:bold">CREATE</span> <span style="color:#000;font-weight:bold">DATABASE</span> userauth;
<span style="color:#998;font-style:italic">/* CREATE USER &#39;userauth&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;userauth&#39;; */</span>
<span style="color:#998;font-style:italic">/* CREATE USER &#39;userauth&#39;@&#39;172.%.%.%&#39; IDENTIFIED BY &#39;userauth&#39;; */</span>
<span style="color:#000;font-weight:bold">CREATE</span> <span style="color:#000;font-weight:bold">USER</span> <span style="color:#d14">&#39;userauth&#39;</span><span style="color:#000;font-weight:bold">@</span><span style="color:#d14">&#39;%&#39;</span> IDENTIFIED <span style="color:#000;font-weight:bold">BY</span> <span style="color:#d14">&#39;userauth&#39;</span>;
<span style="color:#998;font-style:italic">/* GRANT ALL PRIVILEGES ON userauth.* TO &#39;userauth&#39;@&#39;localhost&#39; WITH GRANT OPTION; */</span>
<span style="color:#998;font-style:italic">/* GRANT ALL PRIVILEGES ON userauth.* TO &#39;userauth&#39;@&#39;172.%.%.%&#39; WITH GRANT OPTION; */</span>
<span style="color:#000;font-weight:bold">GRANT</span> <span style="color:#000;font-weight:bold">ALL</span> <span style="color:#000;font-weight:bold">PRIVILEGES</span> <span style="color:#000;font-weight:bold">ON</span> userauth.<span style="color:#000;font-weight:bold">*</span> <span style="color:#000;font-weight:bold">TO</span> <span style="color:#d14">&#39;userauth&#39;</span><span style="color:#000;font-weight:bold">@</span><span style="color:#d14">&#39;%&#39;</span> <span style="color:#000;font-weight:bold">WITH</span> <span style="color:#000;font-weight:bold">GRANT</span> <span style="color:#000;font-weight:bold">OPTION</span>;
FLUSH <span style="color:#000;font-weight:bold">PRIVILEGES</span>;
</code></pre></td></tr></table>
</div>
</div><p>这是我的一个尝试，自定义如何创建 <code>userauth</code> 帐户，并尝试不同的选项。</p>
<h1 id="在接下来的连接中-mysql-如何验证用户名和密码">在接下来的连接中 MySQL 如何验证用户名和密码？</h1>
<p>再次看下这个命令：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd">$ mysql -u finley -h mysql.example.com -p db_name 
</code></pre></td></tr></table>
</div>
</div><p>这个命令我们可以运行在我们的笔记本上，在web的主机服务器上，或者是壁橱里的树莓派上。关键是我们为数据库提供用户名、密码和主机名。<code>mysql</code>程序连接到运行于命名服务器上的数据库。即服务器，<code>mysql.example.com</code>，可能和我们运行命令不在同一个机器上。</p>
<p>任何时候，MySQL 收到一个连接请求，他会搜集这些特征：</p>
<ul>
<li>提供的用户名和密码</li>
<li>具有TCP/IP数据通道另一端的IP地址的套接字</li>
</ul>
<p>换句话说，MySQL有这些数据：</p>
<blockquote>
<p>a) 用户名</p>
<p>b) 密码</p>
<p>c) 连接来源的IP地址</p>
</blockquote>
<p>使用这些数据来匹配表 <code>mysql.user</code>(数据库 <code>mysql</code>中的 <code>table</code>表)的行，但这究竟意味着什么？这些 <strong>CREATE USER</strong> 和 <strong>GRANT</strong> 命令明显提到了主机名如 <em>localhost</em> 和 IP 地址。但是MySQL如何解析它？</p>
<p>这里是检查这种情形的第一步：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">use</span> mysql;
...
mysql<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">select</span> <span style="color:#000;font-weight:bold">user</span>,host <span style="color:#000;font-weight:bold">from</span> <span style="color:#000;font-weight:bold">user</span>;
<span style="color:#000;font-weight:bold">+---------------+-----------+</span>
<span style="color:#000;font-weight:bold">|</span> <span style="color:#000;font-weight:bold">user</span>          <span style="color:#000;font-weight:bold">|</span> host      <span style="color:#000;font-weight:bold">|</span>
<span style="color:#000;font-weight:bold">+---------------+-----------+</span>
<span style="color:#000;font-weight:bold">|</span> root          <span style="color:#000;font-weight:bold">|</span> <span style="color:#000;font-weight:bold">%</span>         <span style="color:#000;font-weight:bold">|</span>
<span style="color:#000;font-weight:bold">|</span> userauth      <span style="color:#000;font-weight:bold">|</span> <span style="color:#000;font-weight:bold">%</span>         <span style="color:#000;font-weight:bold">|</span>
<span style="color:#000;font-weight:bold">|</span> mysql.session <span style="color:#000;font-weight:bold">|</span> localhost <span style="color:#000;font-weight:bold">|</span>
<span style="color:#000;font-weight:bold">|</span> mysql.sys     <span style="color:#000;font-weight:bold">|</span> localhost <span style="color:#000;font-weight:bold">|</span>
<span style="color:#000;font-weight:bold">|</span> root          <span style="color:#000;font-weight:bold">|</span> localhost <span style="color:#000;font-weight:bold">|</span>
<span style="color:#000;font-weight:bold">+---------------+-----------+</span>
<span style="color:#099">5</span> rows <span style="color:#000;font-weight:bold">in</span> <span style="color:#458;font-weight:bold">set</span> (<span style="color:#099">0</span>.<span style="color:#099">00</span> sec)
</code></pre></td></tr></table>
</div>
</div><p><code>mysql</code> 数据库持有 MySQL 用于自己管理的数据表。<code>user</code> 表列出了这个 MySQL 服务器知道的用户ID。还有其他列，如密码列，但是我们仅展示这些我们讨论关注的列。</p>
<p>MySQL所做的就是在这个表中找到与这三个属性相匹配的条目。</p>
<p>对于用户名和密码，MySQL 简单地进行字符串比较。</p>
<p>而对于 <code>host</code>列，它做一些模式匹配。因为这是一个 SQL 数据库，通配符是 <code>%</code>，值为 <code>%</code> 的主机匹配来自任何主机的连接，而值为 <code>172.20.%.%</code>的主机匹配 <code>172.20.x.x</code> 范围内的任意IP地址。</p>
<p>文档</p>
<ul>
<li>
        <img class="mx-auto" alt="(dev.mysql.com)" src="https://www.google.com/s2/favicons?domain=dev.mysql.com" />   
     <a href="https://dev.mysql.com/doc/refman/8.0/en/account-names.html">https://dev.mysql.com/doc/refman/8.0/en/account-names.html</a></li>
</ul>
<p>例如：</p>
<ul>
<li><code>host</code> 的值可以是域名或IP地址。对于IP地址，它同时支持传统的 IPv4 和新兴的 IPv6 地址格式。</li>
<li><code>%</code>和 <code>_</code> 都是通配符，它的模式匹配和SQL的 <code>LIKE</code> 操作类似</li>
<li><code>%.com</code> 匹配主机域名在 <code>.com</code> 的任意连接。</li>
<li><code>198.51.100.%</code> 匹配前三个八进制为 <code>198</code>,<code>51</code>和<code>100</code>的IPv4地址。</li>
<li><code>'david'@'198.51.100.0/255.255.255.0'</code> 允许掩码匹配</li>
</ul>
<h1 id="有点常见用户表配置错误">有点常见：用户表配置错误</h1>
<p>显然，MySQL可能会被 <code>mysql.user</code> 并产生不可理解的用户认证失败。</p>
<h2 id="在-userlocalhost-和-user172-之间有什么不同">在 <code>user@localhost</code> 和 <code>user@172.%</code> 之间有什么不同？</h2>
<p>当使用同一个用户从不同的IP地址连接MySQL有什么不同吗？</p>
<p>是的。</p>
<p>考虑一下。MySQL 匹配 <code>mysql.user</code>表中的行。即一个来自 <code>localhost</code> 的连接并不区配置 <code>172.%</code> 的行。用户ID <code>user@localhost</code>,<code>user@foo.com</code>,<code>user@'192.168.1.%'</code> 和 <code>user@'172.%'</code> 在 MySQL 的概念中是完全不同的条目。</p>
<p>另一个因素是 <code>mysql.user</code> 表有一个索引，它是由 <code>user</code> 列和 <code>host</code> 列组成的多列索引。</p>
<p><strong>用户名为空的用户表条目是与任何提供的用户标识相匹配的匿名用户</strong></p>
<p>这可能是一个常见的配置问题，可能会产生意外的结果。</p>
<p>在 <code>mysql.user</code> 表中一个空白用户名的条目匹配任何提供的用户名，但是将连接视为匿名用户。MySQL文档中说：</p>
<p><em>如果用户的值为空，它匹配任何用户名。如果 user 表的行匹配一个接入的连接有个空白用户名，该用户被认为是没有名字的匿名用户，而不是客户端实际上指定的名字。</em></p>
<p>最后一点与访问权限 <strong>GRANT</strong> 声明有关。您的软件可能提供了所需的用户名，期望根据该用户名获得 <strong>GRANT</strong> 权限，但如果最终匹配匿名用户，则连接将具有匿名用户的 <strong>GRANT</strong> 权限。</p>
<p>文档：</p>
<ul>
<li>
        <img class="mx-auto" alt="(dev.mysql.com)" src="https://www.google.com/s2/favicons?domain=dev.mysql.com" />   
     <a href="https://dev.mysql.com/doc/refman/8.0/en/connection-access.html">https://dev.mysql.com/doc/refman/8.0/en/connection-access.html</a></li>
</ul>
<p>该页详细描述了 MySQL 是如何验证连接信息的。</p>
<h1 id="mysql-排序用户表">MySQL 排序用户表</h1>
<p>根据文档：</p>
<ul>
<li>无论何时，服务器读取用户表到内存，都排序行。</li>
<li>无论何时，客户端尝试连接，服务器将按排序顺序查看行。</li>
<li>服务器使用与客户端主机名和用户名匹配的第一行。</li>
</ul>
<p>因此 <code>mysql.user</code> 数据库的解释顺序与前面的 <strong>SELECT</strong> 查询不同。</p>
<p>在某些情况下，您可能需要考虑 <code>user</code> 表的排序顺序。</p>
<h1 id="让mysql告诉您帐户的访问权限">让MySQL告诉您帐户的访问权限</h1>
<p>试试这个：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd">mysql&gt; show create user &#39;userauth&#39;@&#39;%&#39;;
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| CREATE USER for userauth@%                                                                                                                                            |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| CREATE USER &#39;userauth&#39;@&#39;%&#39; IDENTIFIED WITH &#39;mysql_native_password&#39; AS &#39;*E42080C77C398C9F75A841BF6A26CDFE9977BD95&#39; REQUIRE NONE PASSWORD EXPIRE DEFAULT ACCOUNT UNLOCK |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; show grants for userauth@&#39;%&#39;;
+--------------------------------------------------------------------------+
| Grants for userauth@%                                                    |
+--------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO &#39;userauth&#39;@&#39;%&#39;                                     |
| GRANT ALL PRIVILEGES ON `userauth`.* TO &#39;userauth&#39;@&#39;%&#39; WITH GRANT OPTION |
+--------------------------------------------------------------------------+
2 rows in set (0.00 sec)
</code></pre></td></tr></table>
</div>
</div><p>让MySQL显示给定用户ID的配置相对容易。这意味着，您可以尝试不同的用户ID字符串，查看 MySQL 的响应。</p>
<h1 id="引号一定是必须的吗">引号一定是必须的吗？</h1>
<p>来自 MySQL 官方文档：</p>
<p><em>如果用户名和主机名作为未加引号的标识符合法，则不需要用引号引起来。必须用引号指定包含特殊字符的用户名字符串。</em></p>
<p>引号并不总是必须的。</p>
<h1 id="使用-docker-测试本地和远程连接">使用 Docker 测试本地和远程连接</h1>
<p>使用 Docker 来同时模拟本地连接 MySQL 和远程访问是非常容易的。<code>mysql/mysql-server</code> 容器包含一个 <code>mysql</code> 程序，我们可以用作该目的。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd">$ docker run -it --rm --network authnet mysql/mysql-server  mysql -u userauth -h db-userauth -p
Enter password: 
</code></pre></td></tr></table>
</div>
</div><p>这基于 <code>mysql/mysql-server</code> 镜像创建一个容器。容器在前端执行（<code>-it</code> 选项）并且当容器结束（<code>--rm</code>）将被删除</p>
<p>因此，该容器对于数据库容器显然是 <em>remote</em> 的。数据库的主机名在 <code>-h db-userauth</code> 参数指定 。在这个示例中，我们使用 <code>-network</code> ，将其附加到网络 network，此属性是可选的，它取决于数据库容器的配置方式。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd">$ docker exec -it db-userauth mysql -u root -p
Enter password:
</code></pre></td></tr></table>
</div>
</div><p>这是另一种方式，在数据库容器中执行 <code>mysql</code>。这将是一个本地连接 MySQL，而之前的例子是远程连接。</p>
<p>你可能有个用来诊断尝试连接的服务容器。你必须首先确保 <code>mysql</code> 客户端程序已经安装在容器中。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd">$ docker exec -it svc-userauth mysql -u userauth -h db-userauth -p
Enter password:
</code></pre></td></tr></table>
</div>
</div><p>这将是一个现有的容器，它正在运行通常连接到 <code>db-userauth</code> 数据库的软件。因此，您可以在该容器中运行 <code>mysql</code>，以诊断该容器是否可以访问数据库容器。</p>
<h1 id="有时候这是最简单最愚蠢的错误">有时候这是最简单最愚蠢的错误</h1>
<p>在学习了以上所有知识之后，我把问题缩小到这个问题：</p>
<pre><code class="language-log" data-lang="log">2020-02-18T04:03:18.988Z users:model-users Sequelize params {
  dbname: 'userauth',
  username: 'userauth',
  password: 'userautn',
  params: { host: 'db-userauth', port: 3306, dialect: 'mysql' }
}
</code></pre><p>仔细看下密码，看到密码的问题了吗？</p>
<h1 id="常用链接">常用链接</h1>
<ul>
<li><a href="https://hub.docker.com/r/mysql/mysql-server">https://hub.docker.com/r/mysql/mysql-server</a>  &ndash; The <code>mysql/mysql-server</code> image
<ul>
<li>Actual documentation: <a href="https://dev.mysql.com/doc/refman/8.0/en/docker-mysql-getting-started.html">https://dev.mysql.com/doc/refman/8.0/en/docker-mysql-getting-started.html</a></li>
<li>And:  <a href="https://dev.mysql.com/doc/refman/8.0/en/docker-mysql-more-topics.html">https://dev.mysql.com/doc/refman/8.0/en/docker-mysql-more-topics.html</a></li>
</ul>
</li>
<li><a href="https://hub.docker.com/_/mysql">https://hub.docker.com/_/mysql</a> &ndash; Another MySQL container with slightly different usage characteristics but largely the same</li>
<li><a href="https://hub.docker.com/_/mariadb">https://hub.docker.com/_/mariadb</a> - The MariaDB project makes a MySQL-compatible database that is approximately 100% compatible with MySQL. Everything said here also applies to MariaDB</li>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/access-control.html">https://dev.mysql.com/doc/refman/8.0/en/access-control.html</a> MySQL access control and account management documentation. There are many sub-documents to this page that are useful for various details.</li>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/general-security-issues.html">https://dev.mysql.com/doc/refman/8.0/en/general-security-issues.html</a> - MySQL security guidelines</li>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/encrypted-connections.html">https://dev.mysql.com/doc/refman/8.0/en/encrypted-connections.html</a> - Ensuring MySQL connections are encrypted</li>
<li>MySQL Server Configuration:
<ul>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/server-configuration.html">https://dev.mysql.com/doc/refman/8.0/en/server-configuration.html</a> - Overview of MySQL server configuration</li>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/server-options.html">https://dev.mysql.com/doc/refman/8.0/en/server-options.html</a> &ndash; Command-line options for the MySQL server</li>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html">https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html</a> - Configuration file variables</li>
</ul>
</li>
</ul>

        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="https://cyberwave.github.io">听雪者</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="https://cyberwave.github.io/post/understanding-mysql-access-denied-error-inout-docker/">https://cyberwave.github.io/post/understanding-mysql-access-denied-error-inout-docker/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/post/json-ld-building-meaningful-data-apis/">使用Json Ld构建有意义的数据API</a></li>
        
        <li><a href="/post/use-hugo-and-github-make-blog/">使用Hugo和GitHub搭建博客</a></li>
        
        <li><a href="/about/">关于我</a></li>
        
        <li><a href="/archives/">归档</a></li>
        
        <li><a href="/search/">搜索</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/tags/docker'>docker</a></li>
                
                <li><a href='/tags/mysql'>mysql</a></li>
                
            </ul>
            
        </div>
    </article>
    
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yourdiscussshortname" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "your github repo"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2021 <a href="https://cyberwave.github.io">听雪者的博客 By 听雪者</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'GA ID', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




    <script src='/js/douban.js'></script>

                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://cyberwave.github.io/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://cyberwave.github.io">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://cyberwave.github.io/post/understanding-mysql-access-denied-error-inout-docker/" title="了解Docker容器内外的MySQL拒绝服务错误">了解Docker容器内外的MySQL拒绝服务错误</a>
    </li>
    
    <li>
        <a href="https://cyberwave.github.io/post/json-ld-building-meaningful-data-apis/" title="使用Json Ld构建有意义的数据API">使用Json Ld构建有意义的数据API</a>
    </li>
    
    <li>
        <a href="https://cyberwave.github.io/post/use-hugo-and-github-make-blog/" title="使用Hugo和GitHub搭建博客">使用Hugo和GitHub搭建博客</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>分类</a></h3>
<ul class="widget-list">
    
    <li><a href="https://cyberwave.github.io/categories/blog/">blog (1)</a></li>
    
    <li><a href="https://cyberwave.github.io/categories/json/">json (1)</a></li>
    
    <li><a href="https://cyberwave.github.io/categories/mysql/">mysql (1)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://cyberwave.github.io/tags/blog/">blog</a>
    
    <a href="https://cyberwave.github.io/tags/docker/">docker</a>
    
    <a href="https://cyberwave.github.io/tags/json-ld/">json-ld</a>
    
    <a href="https://cyberwave.github.io/tags/mysql/">mysql</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://www.flysnow.org/" title="飞雪无情的博客">飞雪无情的博客</a>
        </li>
        
        <li>
            <a target="_blank" href="http://yuedu.baidu.com/ebook/14a722970740be1e640e9a3e" title="Android Gradle权威指南">Android Gradle权威指南</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://cyberwave.github.io/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>